<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static "/server_management/global_styles.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "/server_management/server_call_style.css" %}">
{#    <script src="{% static "/server_management/server_call.js" %}"></script>#}

</head>
<body>
<div class="grid-container">

    <div class="control">
        <div class="controlName">
            <a>{{ server_name }}</a>
        </div>

        <div class="controlContent">
            <a class="buttonMain">clear</a>
            <a class="buttonMain">restart</a>
            <a class="buttonMain" onclick="disconnectSocket()">disconnect</a>
            {% if connection  == True %}
                <div class="indicator connected" title="Connected to {{ server_name }}"></div>
            {% else %}
                <div class="indicator disconnected" title="Disconnected from {{ server_name }}"></div>
            {% endif %}

        </div>
    </div>

    <div class="header">
        <div class="headerContent">
            <a class="buttonMain">main menu</a>
            <a class="logout" href="/server_management/accounts/logout">logout</a>
        </div>
    </div>
    <div class="console">
        <pre id="scroll" >
            {% for a in cmd_history %}{{ a }}{% endfor %}
{#            {% for x in response %}{{ x }}{% endfor %}#}
        </pre>
    </div>

    <div class="commands">
        <table id="tableGlobal">
            <tr>
                <th style="background-color: red" onclick="showTable('Global')">global</th>
                <th onclick="showTable('User')">user</th>
                <th onclick="showTable('Used')">used</th>
            </tr>
            {% for global in global_commands %}
                <tr>
                    <td colspan="3">{{ global.commandsave }}</td>
                </tr>
            {% endfor %}
        </table>
        <table id="tableUser">
            <tr>
                <th onclick="showTable('Global')">global</th>
                <th style="background-color: red" onclick="showTable('User')">user</th>
                <th onclick="showTable('Used')">used</th>
            </tr>
            {% for user in user_commands %}
                <tr>
                    <td colspan="3">{{ user.commandsave }}</td>
                </tr>
            {% endfor %}
        </table>
        <table id="tableUsed">
            <tr>
                <th onclick="showTable('Global')">global</th>
                <th onclick="showTable('User')">user</th>
                <th style="background-color: red" onclick="showTable('Used')">used</th>
            </tr>
            {% for com in used_commands %}
                <tr>
                    <td colspan="3">{{ com }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>

    <div class="confirm">
        <form id="send_command" method="post">
            {% csrf_token %}
            <input name="command" id="inputCommand">
            <button type="submit">Submit</button>
        </form>
    </div>

    <div class="learn">
        <form id="learn_command" method="post">
            {% csrf_token %}
            <input name="commandSave">

            <input type="radio" id="target1" name="target" value="global">
            <label for="target1">Global</label>

            <input type="radio" id="target2" name="target" value="user" checked>
            <label for="target2">User</label>
            <button type="submit">Save Command</button>
        </form>
    </div>
</div>

{#    <button onclick="what()">DISCARD SOCKET</button>#}

<script src="{% static "server_management/server_call.js" %}"></script>

<script>
         function  disconnectSocket() {
             let request = new XMLHttpRequest();

             request.open("POST", "",true);
             request.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
             request.send();

             return "Write smthing";
         }

    </script>


</body>
</html>